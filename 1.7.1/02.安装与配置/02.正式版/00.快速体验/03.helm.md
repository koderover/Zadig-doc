---
title: 基于 Helm 命令安装
date: 2021-05-21 13:39:42
permalink: /v1.7.1/install/quick-start-helm-deploy/
---

> 使用 Helm 安装 Zadig 系统正式版，使用 Zadig 系统提供的内置可持久存储组件，不推荐生产使用，适合对 Helm 有一定了解的用户。建议使用官网 [Helm 安装命令生成工具](https://www.koderover.com/installer)进行安装。


## 前置条件
1. 安装 Helm v3.5+，这是一个简单的命令行工具，可以从[此处](https://github.com/helm/helm/releases)获取。
2. v1.16.0 及以上版本的 Kubernetes 集群 <br>

## 步骤 1：添加 Helm Chart 仓库
添加 Zadig 官方 Chart 仓库。

```bash
helm repo add koderover-chart https://koderover.tencentcloudcr.com/chartrepo/chart
```

## 步骤 2：安装 Zadig

Zadig 支持两种访问方式，一种是提供访问域名，另一种是直接使用 IP + PORT 的方式访问。

### 方式一：域名访问

> 请确保您有已备案的域名。

```bash
TODO
```
### 方式二：IP + PORT 访问

```bash
# 以下变量可根据实际情况按需替换
export IP=1.1.1.1 # Kubernetes 任一节点的外网可访问 IP
export PORT=30000 # 30000~32767 之间的任意一端口
export EMAIL=example@koderover.com
export PASSWORD=zadig
export VERSION=1.7.1
export NAMESPACE=zadig

helm upgrade --install --create-namespace -n ${NAMESPACE} \
--set global.extensions.extAuth.extauthzServerRef.namespace=zadig \
--set endpoint.type=IP --set endpoint.IP="${IP}" --set ingress-nginx.controller.service.nodePorts.http=${PORT} \
--set dex.fullnameOverride=zadig-${NAMESPACE}-dex --set dex.config.issuer=http://zadig-${NAMESPACE}-dex:5556/dex --set "dex.config.staticClients[0].redirectURIs[0]=http://${IP}:${PORT}/api/v1/callback,dex.config.staticClients[0].id=zadig,dex.config.staticClients[0].name=zadig,dex.config.staticClients[0].secret=ZXhhbXBsZS1hcHAtc2VjcmV0" \
--set init.adminPassword=${PASSWORD} --set init.adminEmail=${EMAIL} \
--set tags.mysql=true --set mysql.primary.persistence.enabled=false \
--set mongodb.db=zadig --set tags.mongodb=true --set mongodb.persistence.enabled=false \
--set tags.minio=true --set minio.persistence.enabled=false \
--set tags.ingressController=true --set ingress-nginx.controller.service.type=LoadBalancer --version=${VERSION} zadig-zadig ./zadig

```

## Helm Charts 卸载

> 注意：只有当您完全知晓每项操作所带来的结果，再去执行该操作。

```
helm uninstall zadig -n zadig
```

